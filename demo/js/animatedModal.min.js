!function(t,e){"function"==typeof define&&define.amd?define(e):t.AnimatedModal=e()}(this,function(){"use strict";function t(){var t,e=document.createElement("fakeelement"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in o)if(void 0!==e.style[t])return o[t]}function e(t,e){var o=t.style,n,a;if(e=e.charAt(0).toUpperCase()+e.slice(1),void 0!==o[e])return e;for(a=0;a<d.length;a++)if(n=d[a]+e,void 0!==o[n])return n}function o(t,o){for(var n in o)t.style[e(t,n)||n]=o[n];return t}function n(t,e){return t.classList?t.classList.add(e):t.className+=" "+e,t}function a(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className),t}function s(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function i(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)void 0===t[n]&&(t[n]=o[n])}return t}function l(t){var e=this;e.opts=i(t||{},l.defaults,r),e.modal="object"==typeof e.opts.modalTarget?e.opts.modalTarget:document.getElementById(e.opts.modalTarget),e.isOpen=!1,n(e.modal,"animated"),n(e.modal,e.opts.modalBaseClass),e.opts.closeBtn&&e.modal.querySelector(e.opts.closeBtn).addEventListener("click",e.close.bind(e))}var d="webkit Moz ms O".split(" "),m=t(),r={animatedIn:"zoomIn",animatedOut:"zoomOut",animationDuration:".6s",closeBtn:".close-modal",color:"#fff",height:"100%",left:"0px",modalBaseClass:"animated-modal",modalTarget:"animated-modal",opacityIn:"1",opacityOut:"0",overflow:"auto",position:"fixed",visibilityIn:"visible",visibilityOut:"hidden",top:"0",width:"100%",zIndexIn:"9999",zIndexOut:"-9999",beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null};return l.defaults={},l.prototype.open=function(){var t=this;if(!t.isOpen)return o(document.documentElement,{overflow:"hidden"}),o(document.body,{overflow:"hidden"}),a(t.modal,t.opts.modalBaseClass+"-off")&&(s(t.modal,t.opts.animatedOut),s(t.modal,t.opts.modalBaseClass+"-off"),n(t.modal,t.opts.modalBaseClass+"-on")),a(t.modal,t.opts.modalBaseClass+"-on")&&("function"==typeof t.opts.afterOpen&&t.opts.beforeOpen(),o(t.modal,{opacity:t.opts.opacityIn,visibility:t.opts.visibilityIn,"z-index":t.opts.zIndexIn}),n(t.modal,this.opts.animatedIn),t.modal.addEventListener(m,function e(){"function"==typeof t.opts.afterOpen&&t.opts.afterOpen(),t.isOpen=!0,t.modal.removeEventListener(m,e)})),t},l.prototype.close=function(){var t=this;if(t.isOpen)return document.documentElement.removeAttribute("style"),document.body.removeAttribute("style"),"function"==typeof t.opts.afterOpen&&t.opts.beforeClose(),a(t.modal,t.opts.modalBaseClass+"-on")&&(s(t.modal,t.opts.modalBaseClass+"-on"),n(t.modal,t.opts.modalBaseClass+"-off")),a(t.modal,t.opts.modalBaseClass+"-off")&&(s(t.modal,t.opts.animatedIn),n(t.modal,t.opts.animatedOut),t.modal.addEventListener(m,function e(){o(t.modal,{visibility:t.opts.visibilityOut,"z-index":t.opts.zIndexOut}),"function"==typeof t.opts.afterOpen&&t.opts.afterClose(),t.isOpen=!1,t.modal.removeEventListener(m,e)})),t},l});