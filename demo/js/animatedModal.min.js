!function(e,t){"function"==typeof define&&define.amd?define(t):e.AnimatedModal=t()}(this,function(){"use strict";function e(){var e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}function t(e,t){var n=e.style,o,a;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==n[t])return t;for(a=0;a<r.length;a++)if(o=r[a]+t,void 0!==n[o])return o}function n(e,n){for(var o in n)e.style[t(e,o)||o]=n[o];return e}function o(e,t){return e.classList?e.classList.add(t):e.className+=" "+t,e}function a(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className),e}function s(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)void 0===e[o]&&(e[o]=n[o])}return e}function l(e){var t=this;t.opts=i(e||{},l.defaults,m),t.modal="object"==typeof t.opts.modalTarget?t.opts.modalTarget:document.getElementById(t.opts.modalTarget),t.isOpen=!1,t.opts.closeBtn&&t.modal.querySelector(t.opts.closeBtn).addEventListener("click",t.close.bind(t))}var r="webkit Moz ms O".split(" "),d=e(),m={animatedIn:"zoomIn",animatedOut:"zoomOut",closeBtn:".close-modal",modalBaseClass:"animated-modal",modalTarget:"animated-modal",afterClose:null,afterOpen:null,beforeClose:null,beforeOpen:null};return l.defaults={},l.prototype.open=function(){var e=this;if(!e.isOpen)return n(document.documentElement,{overflow:"hidden"}),n(document.body,{overflow:"hidden"}),s(e.modal,e.opts.animatedOut),o(e.modal,e.opts.modalBaseClass+"-on"),o(e.modal,this.opts.animatedIn),"function"==typeof e.opts.beforeOpen&&e.opts.beforeOpen(),d?e.modal.addEventListener(d,function t(){"function"==typeof e.opts.afterOpen&&e.opts.afterOpen(),e.modal.removeEventListener(d,t),e.isOpen=!0,document.documentElement.addEventListener("keyup",function n(t){var o=t.keyCode||t.which;27===o&&(e.close(e),document.documentElement.removeEventListener("keyup",n))})}):("function"==typeof e.opts.afterOpen&&e.opts.afterOpen(),e.isOpen=!0,document.documentElement.addEventListener("keyup",function a(t){var n=t.keyCode||t.which;27===n&&(e.close(e),document.documentElement.removeEventListener("keyup",a))})),e},l.prototype.close=function(){var e=this;if(e.isOpen)return document.documentElement.removeAttribute("style"),document.body.removeAttribute("style"),"function"==typeof e.opts.beforeClose&&e.opts.beforeClose(),s(e.modal,e.opts.animatedIn),o(e.modal,e.opts.animatedOut),d?e.modal.addEventListener(d,function t(){s(e.modal,e.opts.modalBaseClass+"-on"),"function"==typeof e.opts.afterClose&&e.opts.afterClose(),e.isOpen=!1,e.modal.removeEventListener(d,t)}):(s(e.modal,e.opts.modalBaseClass+"-on"),"function"==typeof e.opts.afterClose&&e.opts.afterClose(),e.isOpen=!1),e},l});