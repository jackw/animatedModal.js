!function(t,o){"function"==typeof define&&define.amd?define(o):t.AnimatedModal=o()}(this,function(){"use strict";function t(){var t,o=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==o.style[t])return n[t]}function o(t,o){var n=t.style,e,a;if(o=o.charAt(0).toUpperCase()+o.slice(1),void 0!==n[o])return o;for(a=0;a<r.length;a++)if(e=r[a]+o,void 0!==n[e])return e}function n(t,n){for(var e in n)t.style[o(t,e)||e]=n[e];return t}function e(t,o){return t.classList?t.classList.add(o):t.className+=" "+o,t}function a(t,o){return t.classList?t.classList.contains(o):new RegExp("(^| )"+o+"( |$)","gi").test(t.className),t}function i(t,o){t.classList?t.classList.remove(o):t.className=t.className.replace(new RegExp("(^|\\b)"+o.split(" ").join("|")+"(\\b|$)","gi")," ")}function s(t){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var e in n)void 0===t[e]&&(t[e]=n[e])}return t}function d(t){var o=this;o.opts=s(t||{},d.defaults,m),o.modal=document.getElementById(o.opts.modalTarget),e(o.modal,"animated"),o.modal.querySelector(o.opts.closeBtn).addEventListener("click",o.close.bind(o)),n(o.modal,{"-moz-animation-duration":o.opts.animationDuration,"-ms-animation-duration":o.opts.animationDuration,"-webkit-animation-duration":o.opts.animationDuration,"animation-duration":o.opts.animationDuration,"background-color":o.opts.color,height:o.opts.height,left:o.opts.left,opacity:o.opts.opacityOut,"overflow-y":o.opts.overflow,position:o.opts.position,top:o.opts.top,width:o.opts.width,"z-index":o.opts.zIndexOut})}var r="webkit Moz ms O".split(" "),l=t(),m={animatedIn:"zoomIn",animatedOut:"zoomOut",animationDuration:".6s",closeBtn:".close-modal",color:"#fff",height:"100%",left:"0px",modalTarget:"animated-modal",opacityIn:"1",opacityOut:"0",overflow:"auto",position:"fixed",top:"0px",width:"100%",zIndexIn:"9999",zIndexOut:"-9999",beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null};return d.defaults={},d.prototype.open=function(){var t=this;return n(document.documentElement,{overflow:"hidden"}),n(document.body,{overflow:"hidden"}),a(t.modal,t.opts.modalTarget+"-off")&&(i(t.modal,t.opts.animatedOut),i(t.modal,t.opts.modalTarget+"-off"),e(t.modal,t.opts.modalTarget+"-on")),a(t.modal,t.opts.modalTarget+"-on")&&("function"==typeof t.opts.afterOpen&&t.opts.beforeOpen(),n(t.modal,{opacity:t.opts.opacityIn,"z-index":t.opts.zIndexIn}),e(t.modal,this.opts.animatedIn),t.modal.addEventListener(l,function o(){"function"==typeof t.opts.afterOpen&&t.opts.afterOpen(),t.modal.removeEventListener(l,o)})),t},d.prototype.close=function(){var t=this;return document.documentElement.removeAttribute("style"),document.body.removeAttribute("style"),"function"==typeof t.opts.afterOpen&&t.opts.beforeClose(),a(t.modal,t.opts.modalTarget+"-on")&&(i(t.modal,t.opts.modalTarget+"-on"),e(t.modal,t.opts.modalTarget+"-off")),a(t.modal,t.opts.modalTarget+"-off")&&(i(t.modal,t.opts.animatedIn),e(t.modal,t.opts.animatedOut),t.modal.addEventListener(l,function o(){n(t.modal,{"z-index":t.opts.zIndexOut}),"function"==typeof t.opts.afterOpen&&t.opts.afterClose(),t.modal.removeEventListener(l,o)})),t},d});